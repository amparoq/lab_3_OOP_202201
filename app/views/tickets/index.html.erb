<style>
.ticket-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

.ticket-card {
  background-color: #f6efef;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.ticket-title {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 10px;
}

.badge {
  margin-bottom: 5px;
}

.ticket-details {
  margin-bottom: 5px;
}

.date-info {
  color: #454545;
  display: flex;
  align-items: center;
}

.icon {
  margin-bottom: 6px;
}

.red-nice {
  background-color: #ff6f69;
}

.yellow-nice {
  background-color: #ffcc5c;
}

.green-nice {
  background-color: #88d8b0;
}
</style>

<head>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>

<div style = "display: flex;">
  <h1>Tickets</h1>
  <p class = "text-muted" style = "margin-top: 16px; margin-left: 15px;">Todos los tickets en el sistema</p>
</div>

<div class="ticket-cards">
  <% @tickets.each do |ticket| %>
    <div class="ticket-card">
      <% if ticket.state == "open" %>
        <sup><span class="badge rounded-pill red-nice">Open</span></sup>
      <% elsif ticket.state == "closed" %>
        <sup><span class="badge rounded-pill green-nice">Closed</span></sup>
      <% elsif ticket.state == "reopened" %>
        <sup><span class="badge rounded-pill yellow-nice">Reopened</span></sup>
      <% end %>
      <% if ticket.priority == 1 %>
        <sup><span class="badge rounded-pill red-nice">Prioridad Alta</span></sup>
      <% elsif ticket.priority == 2 %>
        <sup><span class="badge rounded-pill yellow-nice">Prioridad Media</span></sup>
      <% elsif ticket.priority == 3 %>
        <sup><span class="badge rounded-pill green-nice">Prioridad Baja</span></sup>
      <% end %>
      <h4 class="ticket-title"><%= ticket.title %></h4>
      <div class="date-info">
        <span class="icon me-1"><i class="far fa-calendar-alt"></i></span>
        <p class="ticket-details">Creation Date: <%= ticket.creation_date %></p>
      </div>
      <% if ticket.resolution_date %>
        <div class="date-info">
          <span class="icon me-1"><i class="far fa-calendar-check"></i></span>
          <p class="ticket-details">Resolution Date: <%= ticket.resolution_date %></p>
        </div>
      <% end %>
      <p class="ticket-details"> <%= ticket.description %></p>
      <a href="<%= ticket_path(ticket) %>" class="btn btn-primary">Ver ticket</a>
    </div>
  <% end %>
</div>
